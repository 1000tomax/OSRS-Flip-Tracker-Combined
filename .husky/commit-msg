#!/usr/bin/env sh
# Skip validation if the commit ONLY touches public/data/*
if git diff --cached --name-only | grep -qv '^public/data/'; then
  # Simple Conventional Commits check (no commitlint needed)
  msg="$(cat "$1")"
  case "$msg" in
    feat:*|fix:*|docs:*|style:*|refactor:*|test:*|chore:*|perf:*|ci:*|build:*|revert:*|wip:*|data:*)
      ;;
    *)
      echo "‚ùå Invalid commit message format (Conventional Commits required)."
      echo "   Examples: feat: add X | fix: bug Y | chore: update Z | wip: testing"
      echo "   Allowed types: feat, fix, docs, style, refactor, test, chore, perf, ci, build, revert, wip, data"
      exit 1
      ;;
  esac
fi
